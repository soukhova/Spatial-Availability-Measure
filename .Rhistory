geom_sf(aes(size = pop), data = cities) +
geom_sf(aes(colour = size), data = lines)
cities <- tibble::tribble(
~ lon,    ~ lat,    ~ name,      ~ pop,
5.121420, 52.09074, "Utrecht",   311367,
6.566502, 53.21938, "Groningen", 189991,
4.895168, 52.37022, "Amsterdam", 779808
) %>% sf::st_as_sf(coords = c("lon", "lat"), crs = 4326)
lines_sfc <- sf::st_sfc(list(
sf::st_linestring(rbind(cities$geometry[[1]], cities$geometry[[2]])),
sf::st_linestring(rbind(cities$geometry[[2]], cities$geometry[[3]]))
))
lines <- sf::st_sf(
id = 1:2,
size = c(10,50),
geometry = lines_sfc,
crs = 4326
)
ggplot() +
geom_sf(aes(size = pop), data = cities) +
geom_sf(aes(colour = size), data = lines)
ggplot() +
geom_sf(aes(size = pop), data = cities, color = "green") +
geom_sf(aes(colour = size), data = lines)
ggplot() +
geom_sf(aes(size = Persons_tt_Origin), data = gtha_taz_cent_tt, color="green", shape = 21, alpha = .5)  +
colorspace::scale_color_discrete_diverging(palette = "Blue-Red 2")
ggplot() +
geom_sf(aes(size = Persons_tt_Origin), data = gtha_taz_cent_tt, color="green", shape = 21, alpha = .5)
ggplot() +
geom_sf(aes(size = Persons_tt_Origin), data = gtha_taz_cent_tt, color="green",  alpha = .5)
ggplot() +
geom_sf(aes(size = Persons_tt_Origin), data = gtha_taz_cent_tt, color="green",  alpha = .5)  +
scale_colour_brewer(palette="RdYlGn")
ggplot() +
geom_sf(aes(size = Persons_tt_Origin), data = gtha_taz_cent_tt, color="RdYlGn",  alpha = .5)
ggplot() +
geom_sf(aes(size = Persons_tt_Origin), data = gtha_taz_cent_tt, color="blue",  alpha = .5)
ggplot() +
geom_sf(aes(size = Persons_tt_Origin, color=Persons_tt_Origin), data = gtha_taz_cent_tt,  alpha = .5)
ggplot() +
geom_sf(aes(color=Persons_tt_Origin), data = gtha_taz_cent_tt,  alpha = .5)
ggplot() +
geom_sf(aes(color=Persons_tt_Origin), data = gtha_taz_cent_tt,  alpha = .5, direction=-1)
ggplot() +
geom_sf(aes(color=Persons_tt_Origin, direction=-1), data = gtha_taz_cent_tt,  alpha = .5)
ggplot() +
geom_sf(aes(color=Persons_tt_Origin, direction=-1), data = gtha_taz_cent_tt,  alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(aes(color=Persons_tt_Origin), data = gtha_taz_cent_tt,  alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(aes(color=Persons_tt_Origin), data = gtha_taz_cent_tt %>% filter(!is.na(AREA)|!is.na(Persons_tt_Origin)),  alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(AREA)|!is.na(Persons_tt_Origin)),
aes(color=Persons_tt_Origin), alpha = .5) +
scale_color_distiller(palette = "Spectral")
gtha_taz_cent_tt %>% filter(!is.na(AREA)|!is.na(Persons_tt_Origin)
gtha_taz_cent_tt %>% filter(!is.na(AREA)|!is.na(Persons_tt_Origin)
gtha_taz_cent_tt %>% filter(!is.na(AREA)|!is.na(Persons_tt_Origin))
gtha_taz_cent_tt %>% filter(is.na(AREA)|is.na(Persons_tt_Origin))
!
gtha_taz_cent_tt %>% filter(!is.na(AREA)|!is.na(Persons_tt_Origin))
gtha_taz_cent_tt %>% filter(!is.na(AREA)|!is.na(Persons_tt_Origin))
gtha_taz_cent_tt %>% filter(!is.na(AREA)|!is.na(Persons_tt_Origin)) %>% summary()
gtha_taz_cent_tt %>% filter(!is.na(AREA)| AREA == 0 | !is.na(Persons_tt_Origin)) %>% summary()
gtha_taz_cent_tt %>% filter(AREA == 0) %>% summary()
gtha_taz_cent_tt %>% filter(AREA = 0) %>% summary()
gtha_taz_cent_tt %>% filter(AREA == 0) %>% summary()
t <- gtha_taz_cent_tt %>% filter(AREA == 0) %>% summary()
t <- gtha_taz_cent_tt %>% summary()
gtha_taz_cent_tt %>% summary()
gtha_taz_cent_tt %>% length(AREA == 0)
length(gtha_taz_cent_tt$AREA == 0)
length[gtha_taz_cent_tt$AREA == 0,]
View(gtha_taz_cent_tt)
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(Persons_tt_Origin)),
aes(color=Persons_tt_Origin), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(Persons_tt_Origin)),
aes(color=Persons_tt_Origin), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt/AREA %>% filter(!is.na(Persons_tt_Origin)),
aes(color=Persons_tt_Origin), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(Persons_tt_Origin)),
aes(color=Persons_tt_Origin/AREA), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(Persons_tt_Origin)),
aes(color=Persons_tt_Origin, size=AREA), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(Persons_tt_Origin)),
aes(color=Persons_tt_Origin, size=AREA), alpha = .3) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(Persons_tt_Origin)),
aes(color=Persons_tt_Origin, size=AREA), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(Persons_tt_Destination)),
aes(color=Persons_tt_Destination, size=AREA), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_tt, aes(fill= Persons_tt_Origin), color = NA) +
scale_fill_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_tt,
aes(fill = Persons_tt_Destination),
color = NA) +
scale_fill_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_tt %>% filter(!is.na(Persons_tt_Origin)), aes(fill= Persons_tt_Origin), color = NA) +
scale_fill_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_tt %>% filter(!is.na(Persons_tt_Destination)),
aes(fill = Persons_tt_Destination),
color = NA) +
scale_fill_distiller(palette = "Spectral")
library(readxl)
library(sf)
library(tidyverse)
library(units)
library(ggmap)
library(scales)
#car travel times for all origins to all destinations (matrix)
load(file = "data-inputs/Travel-Time-Calculations/results/output_OD_car1.Rdata")
# all, unique, traffic analysis zones with associated number of workers and jobs
load(file = "data-inputs/OD-by-FT-Employment/gtha_taz.Rdata")
#Trips taken from origin to destination and associated people
load(file = "data-inputs/OD-by-FT-Employment/od_ft.Rdata")
od_ft_tt <- od_ft %>% merge(output_OD_car1, by.x=c("Origin", "Destination"), by.y=c("fromId", "toId"), all.x=T)
rm(output_OD_car1)
summary(od_ft_tt)
od_ft_tt %>% summarise(sum(Persons)) / od_ft_tt %>% filter(is.na(travel_time)) %>% summarise(sum(Persons))
origins_tt <- od_ft_tt %>% group_by(Origin) %>%
summarise(Persons_tt_Origin = sum(Persons, na.rm = T)*sum(travel_time, na.rm = T)/60)
origins_tt
destinations_tt <- od_ft_tt %>% group_by(Destination) %>%
summarise(Persons_tt_Destination = sum(Persons, na.rm = T)*sum(travel_time, na.rm = T)/60)
destinations_tt
gtha_taz_tt <- gtha_taz %>% merge(origins_tt, by.x="GTA06", by.y="Origin", all.x=T) %>%
merge(destinations_tt, by.x = "GTA06", by.y="Destination", all.x = T)
ggplot() +
geom_sf(data = gtha_taz_tt %>% filter(!is.na(Persons_tt_Origin)), aes(fill= Persons_tt_Origin), color = NA) +
scale_fill_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_tt %>% filter(!is.na(Persons_tt_Destination)),
aes(fill = Persons_tt_Destination),
color = NA) +
scale_fill_distiller(palette = "Spectral")
gtha_taz_cent_tt <- st_centroid(gtha_taz) %>% select(GTA06) %>% merge(gtha_taz_tt %>% st_drop_geometry(), by="GTA06")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(Persons_tt_Origin)),
aes(color=Persons_tt_Origin, size=AREA), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(Persons_tt_Destination)),
aes(color=Persons_tt_Destination, size=AREA), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggsave("~/Desktop/Day 2 Lines.png", width = 23, height = 28)
library(geojsonio)
install.packages("geogsonio")
#install.packages("geogsonio")
library(geojsonio)
install.packages("geojsonio")
library(geojsonio)
library(tidyverse)
library(rgeos)
library(showtext)
library(sysfonts)
library(cowplot)
install.packages("cowplot")
#install.packages("cowplot")
library(cowplot)
library(sf)
# Cities
Barcelona <- geojson_sf("~/Desktop/Day 2 Lines/Data/Bike Routes Barcelona.geojson")
library(readxl)
library(sf)
library(tidyverse)
library(units)
library(ggmap)
library(scales)
#car travel times for all origins to all destinations (matrix)
load(file = "data-inputs/Travel-Time-Calculations/results/output_OD_car1.Rdata")
# all, unique, traffic analysis zones with associated number of workers and jobs
load(file = "data-inputs/OD-by-FT-Employment/gtha_taz.Rdata")
#Trips taken from origin to destination and associated people
load(file = "data-inputs/OD-by-FT-Employment/od_ft.Rdata")
od_ft_tt <- od_ft %>% merge(output_OD_car1, by.x=c("Origin", "Destination"), by.y=c("fromId", "toId"), all.x=T)
rm(output_OD_car1)
summary(od_ft_tt)
od_ft_tt %>% summarise(sum(Persons)) / od_ft_tt %>% filter(is.na(travel_time)) %>% summarise(sum(Persons))
View(od_ft_tt)
destinations_tt <- od_ft_tt %>% group_by(Destination) %>%
summarise(Jobs = sum(Persons, na.rm = T))
destinations_tt
tt <- od_ft_tt %>% filter(travel_time =< "30")
tt <- od_ft_tt %>% filter(travel_time <= "30")
tt
tt <- od_ft_tt %>% filter(travel_time <= "30") %>% group_by(Origin) %>% summarise(tt_ij = sum(travel_time, na.rm = T)/60)
tt
tt <- od_ft_tt %>% filter(travel_time <= "30") %>% group_by(Destination) %>% summarise(tt_ij = sum(travel_time, na.rm = T)/60)
tt
tt <- od_ft_tt %>% filter(travel_time <= "30") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
tt
access_jobs <- od_ft_tt %>% filter(travel_time <= "30") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
access_jobs
access_i <-
od_ft_tt %>% group_by(Origin) %>%
summarise(avg_tt = average(travel_time, na.rm = T)) # so we have workers at each origin.
od_ft_tt %>% group_by(Origin) %>%
summarise(avg_tt = average(travel_time, na.rm = T))
od_ft_tt %>% group_by(Origin) %>% summarise(avg_tt = mean(travel_time, na.rm = T))
gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
gtha_taz_30min <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_30min,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
access_jobs <- od_ft_tt %>% filter(travel_time <= "30") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
access_jobs
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
View(gtha_taz_i)
access_jobs <- od_ft_tt %>% filter(travel_time <= "15") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
access_jobs <- od_ft_tt %>% filter(travel_time <= "180") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
View(gtha_taz_i)
access_jobs <- od_ft_tt %>% filter(travel_time <= "180") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
View(gtha_taz_i)
access_jobs <- od_ft_tt %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
View(gtha_taz_i)
access_jobs <- od_ft_tt %>% filter(travel_time < "180") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
access_jobs <- od_ft_tt %>% filter(travel_time < "400") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
summary(od_ft_tt)
access_jobs <- od_ft_tt %>% filter(travel_time >= "180") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
View(gtha_taz_i)
access_jobs <- od_ft_tt %>% filter(travel_time > "180") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
View(gtha_taz_i)
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
access_jobs <- od_ft_tt %>% filter(travel_time <= "180") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
View(gtha_taz_i)
access_jobs <- od_ft_tt %>% filter(travel_time <= "180") %>% group_by(Origin) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Origin"), all.x=T)
View(gtha_taz_i)
access_jobs <- od_ft_tt%>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
View(gtha_taz_i)
access_jobs <- od_ft_tt %>% filter(travel_time <= "180") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
access_jobs
od_ft_tt %>% filter(travel_time <= "180") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
od_ft_tt  %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
od_ft_tt %>% filter(travel_time <= "400") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
od_ft_tt %>% filter(travel_time <= "100000") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
od_ft_tt %>% filter(travel_time <= "1000000000") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
od_ft_tt %>% filter(travel_time >= "1000000000") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
od_ft_tt %>% filter(travel_time >= "1000000000000") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
od_ft_tt %>% filter(travel_time >= "1000000000000")
od_ft_tt %>% filter(travel_time >= "10000000000")
od_ft_tt %>% filter(travel_time >= "180")
od_ft_tt %>% filter(travel_time >= 180)
od_ft_tt %>% filter(travel_time =< 180)
od_ft_tt %>% filter(travel_time <= 180)
od_ft_tt %>% filter(travel_time <= 190)
od_ft_tt %>% filter(travel_time <= 200)
od_ft_tt %>% filter(travel_time <= 300)
od_ft_tt %>% filter(travel_time < 300)
od_ft_tt %>% filter(travel_time > 300)
od_ft_tt %>% filter(travel_time <= 300)
od_ft_tt %>% filter(travel_time <= 300 | travel_time = 0)
od_ft_tt %>% filter(travel_time <= 300 | travel_time == 0)
od_ft_tt %>% filter(travel_time <= 300 | is.na(travel_time))
od_ft_tt %>% mutate(travel_time = ifelse(is.na(travel_time), 0, travel_time)) %>% filter(travel_time <= 300)
#car travel times for all origins to all destinations (matrix)
load(file = "data-inputs/Travel-Time-Calculations/results/output_OD_car1.Rdata")
# all, unique, traffic analysis zones with associated number of workers and jobs
load(file = "data-inputs/OD-by-FT-Employment/gtha_taz.Rdata")
#Trips taken from origin to destination and associated people
load(file = "data-inputs/OD-by-FT-Employment/od_ft.Rdata")
od_ft_tt <- od_ft %>%
merge(output_OD_car1, by.x=c("Origin", "Destination"), by.y=c("fromId", "toId"), all.x=T) %>%
mutate(travel_time = ifelse(is.na(travel_time), 0, travel_time))
od_ft_tt %>% summarise(sum(Persons)) / od_ft_tt %>% filter(is.na(travel_time)) %>% summarise(sum(Persons))
library(readxl)
library(sf)
library(tidyverse)
library(units)
library(ggmap)
library(scales)
od_ft_tt <- od_ft %>%
merge(output_OD_car1, by.x=c("Origin", "Destination"), by.y=c("fromId", "toId"), all.x=T) %>%
mutate(travel_time = ifelse(is.na(travel_time), 0, travel_time))
rm(output_OD_car1)
summary(od_ft_tt)
od_ft_tt %>% summarise(sum(Persons)) / od_ft_tt %>% filter(is.na(travel_time)) %>% summarise(sum(Persons))
access_jobs <- od_ft_tt %>% filter(travel_time <= "180") %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
View(gtha_taz_i)
od_ft_tt %>% filter(travel_time <= "180")
od_ft_tt
od_ft_tt %>% filter(travel_time <= "180")
od_ft_tt %>% filter(travel_time <= 1000000)
access_jobs <- od_ft_tt %>% filter(travel_time <= 180) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
access_jobs <- od_ft_tt %>% filter(travel_time <= 30) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
gtha_taz_cent_tt <- st_centroid(gtha_taz_i) %>% select(GTA06) %>% merge(gtha_taz_tt %>% st_drop_geometry(), by="GTA06")
gtha_taz_cent_tt <- st_centroid(gtha_taz_i) %>% select(GTA06) %>% merge(gtha_taz_i %>% st_drop_geometry(), by="GTA06")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(Persons_tt_Origin)),
aes(color=Persons_tt_Origin, size=AREA), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(jobs_i)),
aes(color=jobs_i, size=AREA), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(jobs_i)),
aes(color=jobs_i, size=AREA), alpha = .5) +
scale_color_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_cent_tt %>% filter(!is.na(jobs_i)),
aes(color=jobs_i, size=AREA), alpha = .5) +
scale_color_distiller(palette = "Spectral")
load(file = "data-inputs/Boundaries/hamilton_cma.Rdata")
st_intersection(gtha_taz_i, hamilton_cma)
View(gtha_taz_i)
View(hamilton_cma)
st_crs %>% (hamilton_cma)
st_crs(hamilton_cma)
st_crs(gtha_taz_i)
hamilton_cma <- st_transform(hamilton_cma, crs=32617)
load(file = "data-inputs/Boundaries/hamilton_cma.Rdata")
hamilton_cma <- st_crs(hamilton_cma, crs=32617)
hamilton_cma <- sf::st_crs(hamilton_cma, crs=32617)
st_intersection(gtha_taz_i, hamilton_cma)
st_crs(gtha_taz_i)
st_crs(hamilton_cma)
st_crs(hamilton_cma)
hamilton_cma <- st_transform(hamilton_cma, crs=32617)
hamilton_cma <- sf_transform(hamilton_cma, crs=32617)
hamilton_cma <- st_transform(hamilton_cma, crs=32617)
hamilton_cma <- st_coordinates(st_transform(hamilton_cma, crs=32617))
hamilton_cma <- (st_transform(hamilton_cma, crs=st_crs(32617)))
hamilton_cma <- st_transform(hamilton_cma, 32617)
load(file = "data-inputs/Boundaries/hamilton_cma.Rdata")
hamilton_cma <- st_transform(hamilton_cma, 32617)
st_intersection(gtha_taz_i, hamilton_cma)
st_crs(gtha_taz_i)
st_crs(hamilton_cma)
load(file = "data-inputs/Boundaries/hamilton_cma.Rdata")
hamilton_cma <- st_transform(hamilton_cma, "+init=epsg:32617")
st_intersection(gtha_taz_i, hamilton_cma)
st_crs(gtha_taz_i)
st_crs(hamilton_cma)
load(file = "data-inputs/Boundaries/hamilton_cma.Rdata")
hamilton_cma <- st_transform(hamilton_cma, 32617)
st_crs(hamilton_cma)
st_clip(gtha_taz_i, hamilton_cma)
st_intersection(gtha_taz_i, hamilton_cma)
access_jobs <- od_ft_tt %>% filter(travel_time <= 60) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
access_jobs <- od_ft_tt %>% filter(travel_time <= 30) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral", trans = "sqrt")
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral", trans = "sqrt", option="plasma")
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral", trans = "sqrt")
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral", trans = "sqrt", values = scales::rescale((1:10)^4, c(0,1)))
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral", trans = "log10", values = scales::rescale((1:10)^4, c(0,1)))
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral", trans = "log10")
access_jobs <- od_ft_tt %>% filter(travel_time <= 60) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral", trans = "log10")
access_jobs <- od_ft_tt %>% filter(travel_time <= 180) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral", trans = "log10")
View(gtha_taz_i)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral", trans = "sqrt")
access_jobs <- od_ft_tt %>% filter(travel_time <= 30) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral", trans = "sqrt")
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
access_jobs <- od_ft_tt %>% filter(travel_time <= 60) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
access_jobs <- od_ft_tt %>% filter(travel_time <= 180) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
access_jobs <- od_ft_tt %>% filter(travel_time <= 15) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
```{r}
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
access_jobs <- od_ft_tt %>% filter(travel_time <= 45) %>% group_by(Destination) %>% summarise(jobs_i = sum(Persons, na.rm = T))
gtha_taz_i <- gtha_taz %>% merge(access_jobs, by.x=c("GTA06"), by.y=c("Destination"), all.x=T)
ggplot() +
geom_sf(data = gtha_taz_i,
aes(fill= jobs_i), color = NA) +
scale_fill_distiller(palette = "Spectral")
